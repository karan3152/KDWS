{% extends "layout.html" %}

{% block additional_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <img src="{{ url_for('static', filename='images/logo.svg') }}" alt="Logo">
                <span class="sidebar-text">EDMS</span>
            </div>
            <button class="sidebar-toggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        
        <div class="sidebar-menu">
            {% if current_user.is_admin() %}
            <!-- Admin Menu -->
            <a href="{{ url_for('admin_dashboard') }}" class="sidebar-item {% if request.endpoint == 'admin_dashboard' %}active{% endif %}">
                <i class="fas fa-tachometer-alt sidebar-icon"></i>
                <span class="sidebar-text">Dashboard</span>
            </a>
            <a href="{{ url_for('create_employee') }}" class="sidebar-item {% if request.endpoint == 'create_employee' %}active{% endif %}">
                <i class="fas fa-user-plus sidebar-icon"></i>
                <span class="sidebar-text">Add Employee</span>
            </a>
            <a href="{{ url_for('create_employer') }}" class="sidebar-item {% if request.endpoint == 'create_employer' %}active{% endif %}">
                <i class="fas fa-building sidebar-icon"></i>
                <span class="sidebar-text">Add Employer</span>
            </a>
            <a href="{{ url_for('manage_accounts') }}" class="sidebar-item {% if request.endpoint == 'manage_accounts' %}active{% endif %}">
                <i class="fas fa-users-cog sidebar-icon"></i>
                <span class="sidebar-text">Manage Accounts</span>
            </a>
            {% elif current_user.is_employer() %}
            <!-- Employer Menu -->
            <a href="{{ url_for('employer_dashboard') }}" class="sidebar-item {% if request.endpoint == 'employer_dashboard' %}active{% endif %}">
                <i class="fas fa-tachometer-alt sidebar-icon"></i>
                <span class="sidebar-text">Dashboard</span>
            </a>
            <a href="{{ url_for('employee_search') }}" class="sidebar-item {% if request.endpoint == 'employee_search' %}active{% endif %}">
                <i class="fas fa-search sidebar-icon"></i>
                <span class="sidebar-text">Search Employees</span>
            </a>
            {% elif current_user.is_employee() %}
            <!-- Employee Menu -->
            <a href="{{ url_for('employee_dashboard') }}" class="sidebar-item {% if request.endpoint == 'employee_dashboard' %}active{% endif %}">
                <i class="fas fa-tachometer-alt sidebar-icon"></i>
                <span class="sidebar-text">Dashboard</span>
            </a>
            <a href="{{ url_for('employee_profile') }}" class="sidebar-item {% if request.endpoint == 'employee_profile' %}active{% endif %}">
                <i class="fas fa-user sidebar-icon"></i>
                <span class="sidebar-text">My Profile</span>
            </a>
            <a href="{{ url_for('employee_forms') }}" class="sidebar-item {% if request.endpoint == 'employee_forms' %}active{% endif %}">
                <i class="fas fa-file-pdf sidebar-icon"></i>
                <span class="sidebar-text">Forms & Documents</span>
            </a>
            {% endif %}
            
            <div class="sidebar-divider"></div>
            
            <a href="{{ url_for('logout') }}" class="sidebar-item">
                <i class="fas fa-sign-out-alt sidebar-icon"></i>
                <span class="sidebar-text">Logout</span>
            </a>
        </div>
        
        <div class="sidebar-footer">
            <div class="sidebar-user">
                <div class="topbar-profile-img">
                    {{ current_user.username[0] | upper }}
                </div>
                <div class="sidebar-user-info">
                    <div class="sidebar-user-name">{{ current_user.username }}</div>
                    <div class="sidebar-user-role">{{ current_user.role | title }}</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="topbar">
            <h2 class="topbar-title">{% block dashboard_title %}Dashboard{% endblock %}</h2>
            
            <div class="topbar-menu">
                <div class="topbar-menu-item">
                    <div class="topbar-profile">
                        <div class="topbar-profile-img">
                            {{ current_user.username[0] | upper }}
                        </div>
                        <span class="topbar-profile-name">{{ current_user.username }}</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="dashboard-content">
            <!-- Flash messages -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }}">
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            
            {% block dashboard_content %}{% endblock %}
        </div>
    </div>
</div>
{% endblock %}

{% block additional_js %}
{% block dashboard_js %}{% endblock %}
{% endblock %}
